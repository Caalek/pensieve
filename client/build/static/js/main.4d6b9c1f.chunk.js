(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){},106:function(e,t,c){},107:function(e,t,c){"use strict";c.r(t);var a=c(0),s=c(35),n=c.n(s),r=(c(75),c(5)),i=c(38),j=c(13),l=c(14),o=c(19),b=c(10),d=c(37),h=c(28);function O(){var e=Object(a.useState)(localStorage.getItem("token")),t=Object(r.a)(e,2),c=t[0],s=t[1];return[c,function(e){localStorage.setItem("token",e),s(e)}]}var u=c(21),x=c(1);function m(){var e=O(),t=Object(r.a)(e,2),c=t[0];t[1];return Object(x.jsx)(l.a,{fluid:!0,children:Object(x.jsxs)(d.a,{collapseOnSelect:!0,expand:"lg",children:[Object(x.jsxs)(d.a.Brand,{href:"/home",className:"ml-2",children:[Object(x.jsx)("img",{src:"/images/logo_small.png",height:"60",alt:"site logo"}),Object(x.jsx)("span",{className:"site-title",children:Object(x.jsx)("strong",{children:"pensieve"})})]}),Object(x.jsx)(d.a.Toggle,{}),c&&!Object(u.a)(c)?Object(x.jsx)(d.a.Collapse,{children:Object(x.jsxs)(h.a,{className:"nav-links",children:[Object(x.jsxs)(h.a.Link,{href:"/notes/all",children:[Object(x.jsx)("i",{className:"far fa-sticky-note"})," Notes"]}),Object(x.jsxs)(h.a.Link,{href:"/notes/archive",children:[Object(x.jsx)("i",{className:"fas fa-archive"})," Archive"]}),Object(x.jsxs)(h.a.Link,{href:"/notes/trash",children:[Object(x.jsx)("i",{className:"fas fa-trash-alt"})," Trash"]}),Object(x.jsxs)(h.a.Link,{href:"/settings",children:[Object(x.jsx)("i",{className:"fas fa-users-cog"})," Settings"]}),Object(x.jsxs)(h.a.Link,{children:[Object(x.jsx)("i",{className:"fas fa-sign-out-alt"})," Log out"]})]})}):Object(x.jsx)(d.a.Collapse,{className:"justify-content-end",children:Object(x.jsx)(h.a,{children:Object(x.jsxs)(h.a.Link,{href:"/login",children:[Object(x.jsx)("i",{className:"fas fa-sign-in-alt"})," Log in"]})})})]})})}var p=c(9),f=c.n(p),g=c(16),v=c(12),y=c(7),N=c(11),w=c(17),k=c.n(w),S=c(25),C=c(69),A=c.n(C);function L(){var e=Object(a.useState)(),t=Object(r.a)(e,2),c=t[0],s=t[1],n=Object(a.useState)(),i=Object(r.a)(n,2),l=i[0],o=i[1],b=Object(a.useState)(),d=Object(r.a)(b,2),h=d[0],O=d[1],m=Object(a.useState)(!1),p=Object(r.a)(m,2),w=p[0],C=p[1],L=Object(a.useState)(),T=Object(r.a)(L,2),B=T[0],z=T[1],G=Object(a.useState)(),P=Object(r.a)(G,2),D=P[0],E=P[1],I=Object(a.useState)(),q=Object(r.a)(I,2),R=q[0],V=q[1];function _(e,t,c){return F.apply(this,arguments)}function F(){return(F=Object(g.a)(f.a.mark((function e(t,c,a){var s,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={token:D,username:t,email:c,password:a},e.next=3,k.a.post("/api/register",s,{headers:{"Content-Type":"application/json"}});case 3:"sucess"===(n=e.sent).data.message?(V(n.data.token),C(!0)):400===n.status?z("hCaptcha failed."):z(n.data.message);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),h&&l&&c){e.next=3;break}return e.abrupt("return",z("Please fill in all the form fields."));case 3:if(D){e.next=5;break}return e.abrupt("return",z("Please complete the captcha."));case 5:if(!(h.length<8)){e.next=7;break}return e.abrupt("return",z("Password must be at least 8 characters long."));case 7:_(c,l,h);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return w?Object(x.jsx)(j.a,{to:"/notes/all"}):Object(x.jsx)("div",{children:Object(x.jsx)(N.a,{children:Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)("h1",{children:Object(x.jsx)("strong",{children:"Join us now."})}),B&&Object(x.jsx)(S.a,{variant:"danger",children:B}),Object(x.jsxs)(y.a,{onSubmit:function(e){return H.apply(this,arguments)},children:[Object(x.jsxs)(y.a.Group,{children:[Object(x.jsx)(y.a.Label,{children:"Username:"}),Object(x.jsx)(y.a.Control,{onChange:function(e){s(e.target.value)},type:"text",placeholder:"Username:"})]}),Object(x.jsxs)(y.a.Group,{children:[Object(x.jsx)(y.a.Label,{children:"Email:"}),Object(x.jsx)(y.a.Control,{onChange:function(e){o(e.target.value)},type:"email",placeholder:"Email:"})]}),Object(x.jsxs)(y.a.Group,{children:[Object(x.jsx)(y.a.Label,{children:"Password:"}),Object(x.jsx)(y.a.Control,{onChange:function(e){O(e.target.value)},type:"password",placeholder:"Password:"})]}),Object(x.jsx)(y.a.Group,{children:Object(x.jsx)("div",{className:"mt-3",children:Object(x.jsx)(A.a,{sitekey:"09c2657f-489f-4d4e-a037-19600562605d",onVerify:function(e,t){return E(e)}})})}),Object(x.jsx)(v.a,{className:"mt-1",size:"lg",type:"submit",children:"Register"}),!(R&&!Object(u.a)(R))&&Object(x.jsx)(y.a.Group,{children:Object(x.jsxs)(y.a.Text,{children:["Already have an account? ",Object(x.jsx)("a",{href:"/login",children:" Log in."})]})})]})]})})})}function T(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(l.a,{children:Object(x.jsx)(m,{})}),Object(x.jsx)(l.a,{fluid:!0,id:"main-page-bg",className:"mb-5",children:Object(x.jsx)(l.a,{children:Object(x.jsxs)(o.a,{children:[Object(x.jsxs)(b.a,{md:6,className:"mt-5 main-page-slogan",children:[Object(x.jsx)("div",{className:"main-title",children:Object(x.jsx)("h1",{className:"main-title",children:Object(x.jsxs)("strong",{children:["All your",Object(x.jsx)("br",{}),"ideas in",Object(x.jsx)("br",{}),"one place."]})})}),Object(x.jsxs)("p",{children:[Object(x.jsx)("strong",{children:"Pensieve"})," is a place were you can store all your ideas."]})]}),Object(x.jsx)(b.a,{md:6,className:"mt-5 mb-5",children:Object(x.jsx)(L,{})})]})})}),Object(x.jsx)(l.a,{className:"center",children:Object(x.jsx)(o.a,{className:"justify-content-center",children:Object(x.jsxs)(b.a,{md:8,children:[Object(x.jsx)("div",{className:"mb-4",children:Object(x.jsx)("h1",{children:Object(x.jsx)("strong",{children:"How does it work?"})})}),Object(x.jsx)("div",{id:"video-container",children:Object(x.jsx)("video",{className:"video-center blue-border",muted:!0,autoPlay:!0,loop:!0,src:"/videos/video_720p.mp4"})})]})})}),Object(x.jsx)(l.a,{children:Object(x.jsxs)(o.a,{className:"mt-5",children:[Object(x.jsx)(b.a,{md:4,className:"mt-3",children:Object(x.jsx)(N.a,{children:Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)(N.a.Title,{children:Object(x.jsx)("h1",{className:"center mt-2",children:Object(x.jsx)("strong",{children:"What is this?"})})}),Object(x.jsxs)(N.a.Text,{children:[Object(x.jsx)("object",{data:"/images/checklist.svg",alt:"checklist","aria-label":"checklist",className:"img-fluid"}),"Pensieve is a note-taking website that lets you write things down your ideas, todos, shopping lists, or whatever you want on sticky notes. With Pensieve, you don't have to remember anything!"]})]})})}),Object(x.jsx)(b.a,{md:4,className:"mt-3",children:Object(x.jsx)(N.a,{children:Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)(N.a.Title,{children:Object(x.jsx)("h1",{className:"center mt-2",children:Object(x.jsx)("strong",{children:"On every device!"})})}),Object(x.jsxs)(N.a.Text,{children:[Object(x.jsx)("object",{data:"/images/device.svg",alt:"devices","aria-label":"devices",className:"img-fluid"}),"As the notes are stored on your account, you can log in on every device in the world and still have accces to them!"]})]})})}),Object(x.jsx)(b.a,{md:4,className:"mt-3",children:Object(x.jsx)(N.a,{children:Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)(N.a.Title,{children:Object(x.jsx)("h1",{className:"center mt-2",children:Object(x.jsx)("strong",{children:"And the name?"})})}),Object(x.jsxs)(N.a.Text,{children:[Object(x.jsx)("object",{data:"/images/magic.svg",alt:"magic","aria-label":"magic",className:"img-fluid"}),"In Harry Potter, Professor Dumbledore had a magical pensieve to store all his memories. This website serves exactly the same purpose. It's a digital pensieve to store everything you need."]})]})})})]})})]})}c(103);var B=c(32);function z(e){return Object(x.jsx)(B.a,{show:e.show,backdrop:"static",children:Object(x.jsxs)(B.a.Body,{children:[Object(x.jsx)("h1",{className:"center",children:Object(x.jsx)("strong",{children:e.title})}),Object(x.jsx)("p",{className:"center",children:e.text}),Object(x.jsx)(l.a,{children:Object(x.jsxs)(o.a,{className:"justify-content-center",children:[Object(x.jsx)(b.a,{className:"center",children:Object(x.jsx)(v.a,{size:"lg",onClick:e.onConfirm,children:"Yes"})}),Object(x.jsx)(b.a,{className:"center",children:Object(x.jsx)(v.a,{size:"lg",variant:"danger",onClick:function(){e.setShow(!1)},children:"No"})})]})})]})})}function G(e){var t=O(),c=Object(r.a)(t,2),s=(c[0],c[1]),n=Object(a.useState)(!1),i=Object(r.a)(n,2),l=i[0],o=i[1],b=Object(a.useState)(!1),d=Object(r.a)(b,2),h=d[0],u=d[1];return Object(a.useEffect)((function(){e.active&&document.querySelectorAll('a.sidebar-link[href="'.concat(e.active,'"]'))[0].classList.add("active")}),[e.active]),l?Object(x.jsx)(j.a,{to:"/home"}):Object(x.jsxs)("div",{id:"sidebar",className:"sidebar",children:[Object(x.jsxs)("a",{className:"sidebar-link",href:"/notes/all",children:[Object(x.jsx)("i",{className:"far fa-sticky-note"})," Notes"]}),Object(x.jsxs)("a",{className:"sidebar-link",href:"/notes/archive",children:[Object(x.jsx)("i",{className:"fas fa-archive"})," Archive"]}),Object(x.jsxs)("a",{className:"sidebar-link",href:"/notes/trash",children:[Object(x.jsx)("i",{className:"fas fa-trash-alt"})," Trash"]}),Object(x.jsx)("br",{}),Object(x.jsxs)("a",{className:"sidebar-link",href:"/settings",children:[Object(x.jsx)("i",{className:"fas fa-cog"})," Settings"]}),Object(x.jsxs)("span",{className:"sidebar-link",onClick:function(){u(!0)},children:[Object(x.jsx)("i",{className:"fas fa-sign-out-alt"})," Log out"]}),Object(x.jsx)(z,{show:h,setShow:u,onConfirm:function(){s(void 0),o(!0)},title:"Already leaving us?",text:"Are you sure you want to log out?"})]})}var P=c(59);c(104);function D(e){var t=Object(a.useState)(e.contents),c=Object(r.a)(t,2),s=c[0],n=c[1],i=Object(a.useState)(e.pinned),j=Object(r.a)(i,2),l=j[0],o=j[1],b=Object(a.useState)(),d=Object(r.a)(b,2),h=d[0],u=d[1],m=O(),p=Object(r.a)(m,2),N=p[0];p[1];function w(){return(w=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={pinned:l,contents:s},e.next=3,k.a.post("/api/note",t,{headers:{Authorization:"Bearer ".concat(N)}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(g.a)(f.a.mark((function t(){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h||u(s.split("\n")[0]),c={},s===e.contents){t.next=6;break}Object.assign(c,{contents:s}),t.next=11;break;case 6:if(l===e.pinned){t.next=10;break}Object.assign(c,{pinned:l}),t.next=11;break;case 10:return t.abrupt("return");case 11:return t.next=13,k.a.patch("/api/note/".concat(e.noteId),c,{headers:{Authorization:"Bearer ".concat(N)}});case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(x.jsx)(B.a,{show:e.show,animation:!0,backdrop:"static",className:"zoom-in",children:Object(x.jsxs)(y.a,{onSubmit:function(t){"new"===e.type?function(){w.apply(this,arguments)}():"edit"===e.type&&function(){S.apply(this,arguments)}(),e.setShow(!1)},children:[Object(x.jsxs)(B.a.Header,{children:[Object(x.jsx)(B.a.Title,{children:Object(x.jsx)("strong",{children:e.title})}),l?Object(x.jsxs)(P.a,{children:[Object(x.jsx)(y.a.Check,{onChange:function(e){return o(e.target.checked)},checked:!0}),Object(x.jsx)(y.a.Label,{children:Object(x.jsx)("i",{id:"pin-icon",className:"fas fa-thumbtack"})})]}):Object(x.jsxs)(P.a,{children:[Object(x.jsx)(y.a.Check,{onChange:function(e){return o(e.target.checked)}}),Object(x.jsx)(y.a.Label,{children:Object(x.jsx)("i",{id:"pin-icon",className:"fas fa-thumbtack"})})]})]}),Object(x.jsxs)(B.a.Body,{children:[Object(x.jsx)(y.a.Group,{}),Object(x.jsx)(y.a.Group,{children:Object(x.jsx)(y.a.Control,{as:"textarea",rows:15,defaultValue:e.contents,onChange:function(e){return n(e.target.value)}})}),Object(x.jsxs)(B.a.Footer,{children:[Object(x.jsx)(v.a,{variant:"primary",type:"submit",children:"Save"}),Object(x.jsx)(v.a,{variant:"secondary",onClick:function(){e.setShow(!1)},children:"Close"})]})]})]})})}c(105);function E(e){var t=Object(a.useState)(!1),c=Object(r.a)(t,2),s=c[0],n=c[1],i=O(),j=Object(r.a)(i,2),d=j[0];j[1];function h(e){return u.apply(this,arguments)}function u(){return(u=Object(g.a)(f.a.mark((function t(c){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.patch("/api/note/".concat(e.noteId),c,{headers:{Authorization:"Bearer ".concat(d)}});case 2:e.fetchData();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=Object(g.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.delete("/api/note/".concat(e.noteId),{headers:{Authorization:"Bearer ".concat(d)}});case 2:e.fetchData();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(x.jsxs)("div",{children:[Object(x.jsx)(N.a,{className:"mt-3 note-preview",children:Object(x.jsxs)(N.a.Body,{children:[Object(x.jsxs)("div",{onClick:function(){e.deleted||n(!0)},children:[Object(x.jsx)(N.a.Title,{children:Object(x.jsx)("strong",{children:e.contents.split("\n")[0]})}),Object(x.jsx)(N.a.Text,{children:e.contents.length>30?e.contents.substring(0,30)+"...":e.contents.substring(0,30)})]}),Object(x.jsx)(l.a,{className:"mt-2",children:Object(x.jsxs)(o.a,{className:"center",children:[!e.deleted&&Object(x.jsxs)(b.a,{children:[Object(x.jsx)(v.a,{title:"Edit",type:"submit",onClick:function(){return n(!0)},children:Object(x.jsx)("i",{className:"fas fa-edit"})}),Object(x.jsx)("span",{children:"\xa0"})]}),!e.deleted&&!e.archived&&Object(x.jsxs)(b.a,{children:[Object(x.jsx)(v.a,{title:"Archive",onClick:function(){h({archived:!0})},children:Object(x.jsx)("i",{className:"fas fa-archive"})}),Object(x.jsx)("span",{children:"\xa0"})]}),!e.deleted&&Object(x.jsxs)(b.a,{children:[Object(x.jsx)(v.a,{title:"Delete",onClick:function(){h({archived:!1,deleted:!0,deletedAt:new Date})},children:Object(x.jsx)("i",{className:"fas fa-trash-alt"})}),Object(x.jsx)("span",{children:"\xa0"})]}),e.deleted&&Object(x.jsxs)(b.a,{children:[Object(x.jsx)(v.a,{title:"Purge",onClick:function(){return m.apply(this,arguments)},children:Object(x.jsx)("i",{className:"fas fa-bomb"})}),Object(x.jsx)("span",{children:"\xa0"})]}),e.deleted&&Object(x.jsxs)(b.a,{children:[Object(x.jsx)(v.a,{title:"Restore",onClick:function(){h({deleted:!1})},children:Object(x.jsx)("i",{className:"fas fa-trash-restore"})}),Object(x.jsx)("span",{children:"\xa0"})]}),e.archived&&Object(x.jsxs)(b.a,{children:[Object(x.jsx)(v.a,{title:"Remove from archive",onClick:function(){h({archived:!1})},children:Object(x.jsx)("i",{className:"fas fa-trash-restore"})}),Object(x.jsx)("span",{children:"\xa0"})]})]})})]})}),Object(x.jsx)(D,{show:s,setShow:n,noteId:e.noteId,title:"Edit note",contents:e.contents,pinned:e.pinned,type:"edit",fetchData:e.fetchData})]})}var I=c(53);function q(e){var t=Object(a.useState)(!0),c=Object(r.a)(t,2),s=c[0],n=c[1],i=Object(a.useState)(),j=Object(r.a)(i,2),l=j[0],d=j[1],h=O(),u=Object(r.a)(h,2),m=u[0];u[1];function p(){return v.apply(this,arguments)}function v(){return(v=Object(g.a)(f.a.mark((function t(){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(!0),t.next=3,k.a.get("/api/notes".concat(e.queryString),{headers:{Authorization:"Bearer ".concat(m)}});case 3:c=t.sent,d(c.data),n(!1);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){p()}),[]),s?Object(x.jsx)("div",{className:"center",children:Object(x.jsx)(I.a,{variant:"primary",animation:"border",size:"lg"})}):Object(x.jsx)(o.a,{children:l.length>0?l.map((function(e){return Object(x.jsx)(b.a,{lg:3,children:Object(x.jsx)(E,{noteId:e._id,title:e.title,archived:e.archived,deleted:e.deleted,pinned:e.pinned,contents:e.contents,fetchData:p})},e._id)})):Object(x.jsx)("div",{className:"center",children:"Nothing here."})})}function R(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),c=t[0],s=t[1];return Object(x.jsx)(o.a,{className:"justify-content-end",children:Object(x.jsxs)(b.a,{xs:1,className:"mr-5",children:[Object(x.jsx)(v.a,{className:"new-button",size:"lg",onClick:function(){return s(!0)},children:"New"}),Object(x.jsx)(D,{show:c,setShow:s,title:"Create note",type:"new"})]})})}function V(){var e=O(),t=Object(r.a)(e,2),c=t[0],s=(t[1],Object(a.useState)(!1)),n=Object(r.a)(s,2);n[0],n[1];return Object(a.useEffect)((function(){document.title="Pensieve | Notes"}),[]),!c||Object(u.a)(c)?Object(x.jsx)(j.a,{to:"/login"}):Object(x.jsxs)("div",{children:[Object(x.jsx)(G,{active:"/notes/all"}),Object(x.jsx)(m,{}),Object(x.jsxs)(l.a,{children:[Object(x.jsxs)(o.a,{children:[Object(x.jsx)(b.a,{children:Object(x.jsx)("h1",{className:"mt-5",children:Object(x.jsx)("strong",{children:"Notes"})})}),Object(x.jsx)(b.a,{className:"mt-5",children:Object(x.jsx)(R,{})})]}),Object(x.jsx)("h5",{className:"mt-4",children:"Pinned"}),Object(x.jsx)(q,{queryString:"?pinned=true&archived=false&deleted=false"}),Object(x.jsx)("h5",{className:"mt-4",children:"Other"}),Object(x.jsx)(q,{queryString:"?archived=false&deleted=false&pinned=false"})]})]})}function _(e){var t=Object(a.useState)(),c=Object(r.a)(t,2),s=c[0],n=c[1],i=Object(a.useState)(),l=Object(r.a)(i,2),o=l[0],b=l[1],d=Object(a.useState)(!1),h=Object(r.a)(d,2),u=h[0],m=h[1],p=Object(a.useState)(),w=Object(r.a)(p,2),C=w[0],A=w[1],L=O(),T=Object(r.a)(L,2),B=(T[0],T[1]);function z(){return(z=Object(g.a)(f.a.mark((function e(t,c){var a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={email:t,password:c},e.next=3,k.a.post("/api/login",a,{headers:{"Content-Type":"application/json"}});case 3:(s=e.sent).data.auth?(B(s.data.token),m(!0)):s.data.auth||A(s.data.message);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(u),u?Object(x.jsx)(j.a,{to:"/notes/all"}):Object(x.jsx)("div",{children:Object(x.jsx)(N.a,{children:Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)("h1",{className:"box-title",children:Object(x.jsx)("strong",{children:"Login"})}),C&&Object(x.jsx)(S.a,{variant:"danger",children:C}),Object(x.jsxs)(y.a,{onSubmit:function(e){if(e.preventDefault(),!s||!o)return A("Please fill in all the form fields.");!function(e,t){z.apply(this,arguments)}(o,s)},children:[Object(x.jsxs)(y.a.Group,{children:[Object(x.jsx)(y.a.Label,{children:"Email:"}),Object(x.jsx)(y.a.Control,{onChange:function(e){b(e.target.value)},type:"email",placeholder:"Email:"})]}),Object(x.jsxs)(y.a.Group,{children:[Object(x.jsx)(y.a.Label,{children:"Password:"}),Object(x.jsx)(y.a.Control,{onChange:function(e){n(e.target.value)},type:"password",placeholder:"Password:"})]}),Object(x.jsx)(y.a.Group,{className:"center",children:Object(x.jsx)(v.a,{className:"mt-3",size:"lg",type:"submit",children:"Login"})}),Object(x.jsx)(y.a.Group,{className:"mt-2 center",children:Object(x.jsxs)(y.a.Text,{children:["Don't have an account yet? ",Object(x.jsx)("a",{href:"/",children:" Register."}),Object(x.jsx)("br",{}),Object(x.jsx)("a",{href:"/forgot-password",children:"Forgot password?"})]})})]})]})})})}c(106);function F(){var e=Object(a.useState)(),t=Object(r.a)(e,2),c=t[0],s=t[1],n=Object(a.useState)(),i=Object(r.a)(n,2),d=i[0],h=i[1],p=Object(a.useState)(),N=Object(r.a)(p,2),w=N[0],C=N[1],A=Object(a.useState)(),L=Object(r.a)(A,2),T=L[0],B=L[1],P=Object(a.useState)(!0),D=Object(r.a)(P,2),E=D[0],q=D[1],R=O(),V=Object(r.a)(R,2),_=V[0],F=V[1],H=Object(a.useState)(!1),J=Object(r.a)(H,2),U=J[0],W=J[1];function M(){return(M=Object(g.a)(f.a.mark((function e(t){var a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),C(void 0),B(void 0),a={username:d,email:c},console.log(a),e.next=7,k.a.patch("/api/user",a,{headers:{Authorization:"Bearer ".concat(_)}});case 7:"success"===(s=e.sent).data.message?C("Account succesfully updated."):B(s.data.message);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(g.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.delete("/api/user",{headers:{Authorization:"Bearer ".concat(_)}});case 2:F(void 0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(Object(a.useEffect)((function(){function e(){return(e=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("/api/user",{headers:{Authorization:"Bearer ".concat(_)}});case 2:t=e.sent,h(t.data.username),s(t.data.email),q(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.title="Pensieve | Settings",function(){e.apply(this,arguments)}()}),[]),E)return Object(x.jsx)("div",{className:"center",children:Object(x.jsx)(I.a,{variant:"primary",animation:"border",size:"lg"})});return d.length>20&&h(d.substring(0,20)),!_||Object(u.a)(_)?Object(x.jsx)(j.a,{to:"/login"}):(console.log(c),console.log(d),Object(x.jsxs)("div",{children:[Object(x.jsx)(m,{}),Object(x.jsx)(G,{active:"/settings"}),Object(x.jsxs)(l.a,{children:[Object(x.jsx)("h1",{className:"mt-5 mb-4",children:Object(x.jsx)("strong",{children:"Settings"})}),w&&Object(x.jsx)(S.a,{variant:"success",children:w}),T&&Object(x.jsx)(S.a,{variant:"danger",children:T}),Object(x.jsxs)(o.a,{children:[Object(x.jsxs)(b.a,{md:6,children:[Object(x.jsx)("h3",{children:"Account"}),Object(x.jsxs)(y.a,{onSubmit:function(e){return M.apply(this,arguments)},children:[Object(x.jsxs)(y.a.Group,{children:[Object(x.jsx)(y.a.Label,{children:"Username:"}),Object(x.jsx)(y.a.Control,{onChange:function(e){h(e.target.value)},type:"text",defaultValue:d})]}),Object(x.jsxs)(y.a.Group,{children:[Object(x.jsx)(y.a.Label,{children:"Email:"}),Object(x.jsx)(y.a.Control,{onChange:function(e){s(e.target.value)},type:"email",defaultValue:c})]}),Object(x.jsx)(y.a.Group,{children:Object(x.jsx)(v.a,{className:"mt-3",type:"submit",children:"Save changes"})})]})]}),Object(x.jsxs)(b.a,{md:6,children:[Object(x.jsx)("h3",{children:"Appearance"}),Object(x.jsx)(y.a,{children:Object(x.jsxs)(y.a.Group,{children:[Object(x.jsx)(y.a.Label,{children:"Theme:"}),Object(x.jsxs)(y.a.Control,{as:"select",children:[Object(x.jsx)("option",{value:"default",children:"Default"}),Object(x.jsx)("option",{value:"light",children:"Light"}),Object(x.jsx)("option",{value:"dark",children:"Dark"})]})]})})]}),Object(x.jsxs)(b.a,{md:6,className:"mt-3",children:[Object(x.jsx)("h3",{className:"red",children:"Dangerous"}),Object(x.jsx)(v.a,{className:"mb-2",variant:"danger",onClick:function(){return W(!0)},children:"Delete account"})]})]})]}),Object(x.jsx)(z,{show:U,setShow:W,onConfirm:function(){return Y.apply(this,arguments)},title:"Are you sure?",text:"Are you abosolutely sure you want to delete your account? There is no going back."})]}))}function H(){var e=O(),t=Object(r.a)(e,2),c=t[0];t[1];return Object(a.useEffect)((function(){document.title="Pensieve | Archive"}),[]),function(){return c&&!Object(u.a)(c)}?Object(x.jsxs)("div",{children:[Object(x.jsx)(m,{}),Object(x.jsx)(G,{active:"/notes/archive"}),Object(x.jsxs)(l.a,{children:[Object(x.jsx)("h1",{className:"mt-5",children:Object(x.jsx)("strong",{children:"Archive"})}),Object(x.jsx)(q,{queryString:"?archived=true"})]})]}):Object(x.jsx)(j.a,{to:"/login"})}function J(){var e=O(),t=Object(r.a)(e,2),c=t[0];t[1];return Object(a.useEffect)((function(){document.title="Pensieve | Trash"}),[]),!c||Object(u.a)(c)?Object(x.jsx)(j.a,{to:"/login"}):Object(x.jsxs)("div",{children:[Object(x.jsx)(m,{}),Object(x.jsxs)(l.a,{children:[Object(x.jsx)(G,{active:"/notes/trash"}),Object(x.jsx)("h1",{className:"mt-5",children:Object(x.jsx)("strong",{children:"Trash"})}),Object(x.jsx)(q,{queryString:"?deleted=true"}),Object(x.jsx)("div",{className:"center mt-3 gray",children:"Notes in the trash are deleted after 7 days."})]})]})}function U(e){return Object(x.jsxs)("div",{children:[Object(x.jsx)(l.a,{children:Object(x.jsx)(m,{})}),Object(x.jsx)(l.a,{children:Object(x.jsx)(o.a,{className:"justify-content-center",children:Object(x.jsx)(b.a,{md:4,children:e.form})})})]})}function W(){var e=Object(a.useState)(),t=Object(r.a)(e,2),c=t[0],s=t[1],n=Object(a.useState)(),i=Object(r.a)(n,2),j=i[0],l=i[1],o=Object(a.useState)(),b=Object(r.a)(o,2),d=b[0],h=b[1],O=Object(a.useState)(!1),u=Object(r.a)(O,2),m=u[0],p=u[1];function w(){return(w=Object(g.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/send-reset-email",{email:c},{headers:{"Content-Type":"application/json"}});case 2:"success"===(t=e.sent).data.message?(l(void 0),h("A password reset email has been sent to your email adress."),p(!0)):l(t.data.message);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.jsx)("div",{children:Object(x.jsx)(N.a,{children:Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)("h1",{className:"box-title mb-4",children:Object(x.jsx)("strong",{children:"Forgot password"})}),j&&Object(x.jsx)(S.a,{variant:"danger",children:j}),d&&Object(x.jsx)(S.a,{variant:"success",children:d}),Object(x.jsx)("div",{className:"mb-3",children:"Enter your email adress, so we can send you a password reset link."}),Object(x.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),function(){w.apply(this,arguments)}()},children:[Object(x.jsx)(y.a.Group,{children:Object(x.jsx)(y.a.Control,{onChange:function(e){s(e.target.value)},type:"email",placeholder:"Email:"})}),Object(x.jsx)(y.a.Group,{className:"center",children:Object(x.jsx)(v.a,{className:"mt-3",size:"lg",type:"submit",disabled:m,children:"Submit"})})]})]})})})}function M(e){var t=Object(a.useState)(),c=Object(r.a)(t,2),s=c[0],n=c[1],i=Object(a.useState)(!1),l=Object(r.a)(i,2),o=l[0],b=l[1],d=Object(a.useState)(),h=Object(r.a)(d,2),O=h[0],u=h[1];function m(){return(m=Object(g.a)(f.a.mark((function t(){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.post("/api/change-password",{password:s},{headers:{Authorization:"Bearer ".concat(e.token)}});case 2:"success"===(c=t.sent).data.message?b(!0):u(c.data.message);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return o?Object(x.jsx)(j.a,{to:"/login"}):Object(x.jsx)("div",{children:Object(x.jsx)(N.a,{children:Object(x.jsxs)(N.a.Body,{children:[Object(x.jsx)("h1",{className:"box-title mb-4",children:Object(x.jsx)("strong",{children:"Reset password"})}),O&&Object(x.jsx)(S.a,{variant:"danger",children:O}),Object(x.jsx)("div",{className:"mb-3",children:"Enter your new password:"}),Object(x.jsxs)(y.a,{onSubmit:function(e){e.preventDefault(),function(){m.apply(this,arguments)}()},children:[Object(x.jsx)(y.a.Group,{children:Object(x.jsx)(y.a.Control,{onChange:function(e){n(e.target.value)},type:"password",placeholder:"New password:"})}),Object(x.jsx)(y.a.Group,{className:"center",children:Object(x.jsx)(v.a,{className:"mt-3",size:"lg",type:"submit",children:"Submit"})})]})]})})})}function Y(e){return Object(x.jsx)(U,{form:Object(x.jsx)(M,{token:e.match.params.token})})}function K(){return Object(x.jsxs)("div",{className:"center",children:[Object(x.jsx)("h1",{className:"not-found",children:"Error 404"}),Object(x.jsx)("h1",{children:"This page could not be found. Maybe go back to the home page?"}),Object(x.jsx)("a",{href:"/",children:Object(x.jsx)("div",{className:"mt-5",children:Object(x.jsx)(v.a,{size:"lg",children:"Go back home"})})})]})}function Q(){var e=O(),t=Object(r.a)(e,2),c=t[0];t[1];return Object(x.jsx)("div",{children:Object(x.jsx)(i.a,{children:Object(x.jsxs)(j.d,{children:[Object(x.jsx)(j.b,{exact:!0,path:"/",children:c&&!Object(u.a)(c)?Object(x.jsx)(j.a,{to:"/notes/all"}):Object(x.jsx)(T,{})}),Object(x.jsx)(j.b,{exact:!0,path:"/home",children:Object(x.jsx)(T,{})}),Object(x.jsx)(j.b,{path:"/login",children:Object(x.jsx)(U,{form:Object(x.jsx)(_,{})})}),Object(x.jsx)(j.b,{path:"/notes/all",children:Object(x.jsx)(V,{})}),Object(x.jsx)(j.b,{path:"/notes/archive",children:Object(x.jsx)(H,{})}),Object(x.jsx)(j.b,{path:"/notes/trash",children:Object(x.jsx)(J,{})}),Object(x.jsx)(j.b,{path:"/settings",children:Object(x.jsx)(F,{})}),Object(x.jsx)(j.b,{path:"/forgot-password",children:Object(x.jsx)(U,{form:Object(x.jsx)(W,{})})}),Object(x.jsx)(j.b,{path:"/reset-password-page/:token",component:Y}),Object(x.jsx)(j.b,{children:Object(x.jsx)(K,{})})]})})})}n.a.render(Object(x.jsx)(Q,{}),document.getElementById("root"))},75:function(e,t,c){}},[[107,1,2]]]);
//# sourceMappingURL=main.4d6b9c1f.chunk.js.map